---
ingress:
  enabled: true
  hosts:
    - host: torrents.home.gavinmogan.com
      paths:
        - path: /
  tls:
    - secretName: qbittorrent-tls
      hosts:
        - torrents.home.gavinmogan.com
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt
    kubernetes.io/ingress.class: nginx
    kubernetes.io/tls-acme: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: "0"

env:
  TZ: America/Vancouver

resources:
  limits:
    cpu: 1000m
    memory: 1024Mi
  requests:
    cpu: 100m
    memory: 128Mi

persistence:
  config:
    enabled: true
    size: 8Gi
    storageClass: longhorn
  downloads:
    enabled: true
    existingClaim: torrents-nfs-pvc
    mountPath: /downloads

podSecurityContext:
  runAsUser: 1000
  runAsGroup: 1000

initContainers:
- name: update-volume-permission
  image: busybox
  command: ["sh", "-c", "chown -R 1000:1000 /config"]
  volumeMounts:
  - name: config
    mountPath: /config
  securityContext:
    runAsUser: 0

additionalVolumes:
  - name: qbittorrent-scripts
    emptyDir: {}

additionalVolumeMounts:
  - mountPath: /config/custom-cont-init.d
    name: qbittorrent-scripts
